{% extends "base_medico.html" %}
{% block conteudo %}

{% block extra_css %}
<link rel="stylesheet" href="/static/css/perfil_medico.css">
{% endblock %}


    
    <!-- Seção Principal -->
    <section class="secao-perfil">
        <div class="container">
            <!-- Cabeçalho do Perfil -->
            <div class="cabecalho-perfil">
                <div class="row align-items-center">
                    <div class="col-md-3 text-center">
                        <div class="foto-perfil-container">
                            <div class="foto-perfil">
                                <img src="{{ usuario.foto if usuario.foto else '/static/img/user-default.png' }}" alt="Foto do perfil" class="foto-usuario">
                            </div>
                            <button class="botao-editar-foto" data-bs-toggle="modal" data-bs-target="#modalEditarFoto">
                                <i class="bi bi-camera"></i>
                            </button>
                        </div>
                    </div>
                    <div class="col-md-9">
                        <h1 class="mb-2">{{ usuario.nome }}</h1>
                        <p class="mb-2 opacity-75">
                            <i class="bi bi-mortarboard me-2"></i>
                            Cardiologista • CRM 123456-SP
                        </p>
                        <p class="mb-3 opacity-75">
                            <i class="bi bi-geo-alt me-2"></i>
                            São Paulo, SP • 
                            <i class="bi bi-calendar me-2"></i>
                            Membro desde Janeiro 2020
                        </p>
                        <div class="avaliacao-estrelas">
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-half"></i>
                            <span class="ms-2 text-white">4.8 (127 avaliações)</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Estatísticas -->
            <div class="estatisticas-medico">
                <div class="stat-card">
                    <div class="stat-numero">1,247</div>
                    <div class="stat-label">Consultas Realizadas</div>
                </div>
                <div class="stat-card">
                    <div class="stat-numero">89</div>
                    <div class="stat-label">Pacientes Ativos</div>
                </div>
                <div class="stat-card">
                    <div class="stat-numero">4.8</div>
                    <div class="stat-label">Avaliação Média</div>
                </div>
                <div class="stat-card">
                    <div class="stat-numero">5</div>
                    <div class="stat-label">Anos de Experiência</div>
                </div>
            </div>

            <div class="row">
                <!-- Informações Pessoais -->
                <div class="col-lg-8 mb-4">
                    <div class="cartao-secao">
                        <h3 class="titulo-secao">
                            <span>
                                <i class="bi bi-person icone-secao"></i>
                                Informações Pessoais
                            </span>
                            <button class="btn botao-secundario btn-sm" onclick="editarSecao('pessoais')">
                                <i class="bi bi-pencil me-1"></i>
                                Editar
                            </button>
                        </h3>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="campo-perfil">
                                    <label class="label-campo">Nome Completo</label>
                                    <div class="valor-campo" id="nome">{{ usuario.nome }}</div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="campo-perfil">
                                    <label class="label-campo">Email</label>
                                    <div class="valor-campo" id="email">{{ usuario.email }}</div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="campo-perfil">
                                    <label class="label-campo">Telefone</label>
                                    <div class="valor-campo" id="telefone">(11) 99999-9999</div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="campo-perfil">
                                    <label class="label-campo">Data de Nascimento</label>
                                    <div class="valor-campo" id="nascimento">15/03/1985</div>
                                </div>
                            </div>
                        </div>

                        <div class="campo-perfil">
                            <label class="label-campo">Endereço</label>
                            <div class="valor-campo" id="endereco">Rua das Flores, 123 - Vila Madalena, São Paulo - SP</div>
                        </div>
                    </div>

                    <!-- Informações Profissionais -->
                    <div class="cartao-secao">
                        <h3 class="titulo-secao">
                            <span>
                                <i class="bi bi-briefcase icone-secao"></i>
                                Informações Profissionais
                            </span>
                            <button class="btn botao-secundario btn-sm" onclick="editarSecao('profissionais')">
                                <i class="bi bi-pencil me-1"></i>
                                Editar
                            </button>
                        </h3>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="campo-perfil">
                                    <label class="label-campo">CRM</label>
                                    <div class="valor-campo" id="crm">123456-SP</div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="campo-perfil">
                                    <label class="label-campo">Especialidade Principal</label>
                                    <div class="valor-campo" id="especialidade">Cardiologia</div>
                                </div>
                            </div>
                        </div>

                        <div class="campo-perfil">
                            <label class="label-campo">Formação Acadêmica</label>
                            <div class="valor-campo" id="formacao">Medicina - USP (2015) • Residência em Cardiologia - InCor (2018)</div>
                        </div>

                        <div class="campo-perfil">
                            <label class="label-campo">Especialidades</label>
                            <div>
                                <span class="especialidade-tag">Cardiologia</span>
                                <span class="especialidade-tag">Ecocardiografia</span>
                                <span class="especialidade-tag">Medicina Preventiva</span>
                                <span class="especialidade-tag">Telemedicina</span>
                            </div>
                        </div>

                        <div class="campo-perfil">
                            <label class="label-campo">Biografia Profissional</label>
                            <div class="valor-campo" id="biografia">
                                Cardiologista com mais de 5 anos de experiência em diagnóstico e tratamento de doenças cardiovasculares. 
                                Especialista em ecocardiografia e medicina preventiva, com foco em telemedicina e atendimento humanizado.
                            </div>
                        </div>
                    </div>

                    <!-- Horários de Atendimento -->
                    <div class="cartao-secao">
                        <h3 class="titulo-secao">
                            <span>
                                <i class="bi bi-clock icone-secao"></i>
                                Disponibilidade para Consultas
                            </span>
                            <button class="btn botao-secundario btn-sm" onclick="editarDisponibilidade()">
                                <i class="bi bi-pencil me-1"></i>
                                Editar
                            </button>
                        </h3>

                        <div id="disponibilidade-view">
                            <div class="horario-item" data-dia="1">
                                <div>
                                    <div class="dia-semana">Segunda-feira</div>
                                    <div class="horario-periodo" id="periodo-segunda">Indisponível</div>
                                </div>
                                <div class="status-disponibilidade" id="status-segunda">
                                    <i class="bi bi-x-circle text-danger"></i>
                                </div>
                            </div>

                            <div class="horario-item" data-dia="2">
                                <div>
                                    <div class="dia-semana">Terça-feira</div>
                                    <div class="horario-periodo" id="periodo-terca">Indisponível</div>
                                </div>
                                <div class="status-disponibilidade" id="status-terca">
                                    <i class="bi bi-x-circle text-danger"></i>
                                </div>
                            </div>

                            <div class="horario-item" data-dia="3">
                                <div>
                                    <div class="dia-semana">Quarta-feira</div>
                                    <div class="horario-periodo" id="periodo-quarta">Indisponível</div>
                                </div>
                                <div class="status-disponibilidade" id="status-quarta">
                                    <i class="bi bi-x-circle text-danger"></i>
                                </div>
                            </div>

                            <div class="horario-item" data-dia="4">
                                <div>
                                    <div class="dia-semana">Quinta-feira</div>
                                    <div class="horario-periodo" id="periodo-quinta">Indisponível</div>
                                </div>
                                <div class="status-disponibilidade" id="status-quinta">
                                    <i class="bi bi-x-circle text-danger"></i>
                                </div>
                            </div>

                            <div class="horario-item" data-dia="5">
                                <div>
                                    <div class="dia-semana">Sexta-feira</div>
                                    <div class="horario-periodo" id="periodo-sexta">Indisponível</div>
                                </div>
                                <div class="status-disponibilidade" id="status-sexta">
                                    <i class="bi bi-x-circle text-danger"></i>
                                </div>
                            </div>

                            <div class="horario-item" data-dia="6">
                                <div>
                                    <div class="dia-semana">Sábado</div>
                                    <div class="horario-periodo" id="periodo-sabado">Indisponível</div>
                                </div>
                                <div class="status-disponibilidade" id="status-sabado">
                                    <i class="bi bi-x-circle text-danger"></i>
                                </div>
                            </div>

                            <div class="horario-item" data-dia="7">
                                <div>
                                    <div class="dia-semana">Domingo</div>
                                    <div class="horario-periodo" id="periodo-domingo">Indisponível</div>
                                </div>
                                <div class="status-disponibilidade" id="status-domingo">
                                    <i class="bi bi-x-circle text-danger"></i>
                                </div>
                            </div>
                        </div>

                        <!-- Formulário de Edição -->
                        <div id="disponibilidade-edit" style="display: none;">
                            <form id="form-disponibilidade">
                                <div class="row">
                                    <div class="col-12">
                                        <p class="text-muted mb-3">
                                            <i class="bi bi-info-circle me-2"></i>
                                            Configure os dias e horários em que você está disponível para atender pacientes.
                                        </p>
                                    </div>
                                </div>

                                <div class="horario-edit-item">
                                    <div class="d-flex align-items-center justify-content-between mb-2">
                                        <label class="fw-bold">Segunda-feira</label>
                                        <label class="switch-disponibilidade">
                                            <input type="checkbox" name="segunda_ativo" id="segunda_ativo">
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                    <div class="horario-inputs" id="horario-segunda" style="display: none;">
                                        <div class="row">
                                            <div class="col-6">
                                                <label class="form-label">Início</label>
                                                <input type="time" class="form-control campo-edicao" name="segunda_inicio" value="08:00">
                                            </div>
                                            <div class="col-6">
                                                <label class="form-label">Fim</label>
                                                <input type="time" class="form-control campo-edicao" name="segunda_fim" value="18:00">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="horario-edit-item">
                                    <div class="d-flex align-items-center justify-content-between mb-2">
                                        <label class="fw-bold">Terça-feira</label>
                                        <label class="switch-disponibilidade">
                                            <input type="checkbox" name="terca_ativo" id="terca_ativo">
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                    <div class="horario-inputs" id="horario-terca" style="display: none;">
                                        <div class="row">
                                            <div class="col-6">
                                                <label class="form-label">Início</label>
                                                <input type="time" class="form-control campo-edicao" name="terca_inicio" value="08:00">
                                            </div>
                                            <div class="col-6">
                                                <label class="form-label">Fim</label>
                                                <input type="time" class="form-control campo-edicao" name="terca_fim" value="18:00">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="horario-edit-item">
                                    <div class="d-flex align-items-center justify-content-between mb-2">
                                        <label class="fw-bold">Quarta-feira</label>
                                        <label class="switch-disponibilidade">
                                            <input type="checkbox" name="quarta_ativo" id="quarta_ativo">
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                    <div class="horario-inputs" id="horario-quarta" style="display: none;">
                                        <div class="row">
                                            <div class="col-6">
                                                <label class="form-label">Início</label>
                                                <input type="time" class="form-control campo-edicao" name="quarta_inicio" value="08:00">
                                            </div>
                                            <div class="col-6">
                                                <label class="form-label">Fim</label>
                                                <input type="time" class="form-control campo-edicao" name="quarta_fim" value="18:00">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="horario-edit-item">
                                    <div class="d-flex align-items-center justify-content-between mb-2">
                                        <label class="fw-bold">Quinta-feira</label>
                                        <label class="switch-disponibilidade">
                                            <input type="checkbox" name="quinta_ativo" id="quinta_ativo">
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                    <div class="horario-inputs" id="horario-quinta" style="display: none;">
                                        <div class="row">
                                            <div class="col-6">
                                                <label class="form-label">Início</label>
                                                <input type="time" class="form-control campo-edicao" name="quinta_inicio" value="08:00">
                                            </div>
                                            <div class="col-6">
                                                <label class="form-label">Fim</label>
                                                <input type="time" class="form-control campo-edicao" name="quinta_fim" value="18:00">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="horario-edit-item">
                                    <div class="d-flex align-items-center justify-content-between mb-2">
                                        <label class="fw-bold">Sexta-feira</label>
                                        <label class="switch-disponibilidade">
                                            <input type="checkbox" name="sexta_ativo" id="sexta_ativo">
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                    <div class="horario-inputs" id="horario-sexta" style="display: none;">
                                        <div class="row">
                                            <div class="col-6">
                                                <label class="form-label">Início</label>
                                                <input type="time" class="form-control campo-edicao" name="sexta_inicio" value="08:00">
                                            </div>
                                            <div class="col-6">
                                                <label class="form-label">Fim</label>
                                                <input type="time" class="form-control campo-edicao" name="sexta_fim" value="18:00">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="horario-edit-item">
                                    <div class="d-flex align-items-center justify-content-between mb-2">
                                        <label class="fw-bold">Sábado</label>
                                        <label class="switch-disponibilidade">
                                            <input type="checkbox" name="sabado_ativo" id="sabado_ativo">
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                    <div class="horario-inputs" id="horario-sabado" style="display: none;">
                                        <div class="row">
                                            <div class="col-6">
                                                <label class="form-label">Início</label>
                                                <input type="time" class="form-control campo-edicao" name="sabado_inicio" value="08:00">
                                            </div>
                                            <div class="col-6">
                                                <label class="form-label">Fim</label>
                                                <input type="time" class="form-control campo-edicao" name="sabado_fim" value="18:00">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="horario-edit-item">
                                    <div class="d-flex align-items-center justify-content-between mb-2">
                                        <label class="fw-bold">Domingo</label>
                                        <label class="switch-disponibilidade">
                                            <input type="checkbox" name="domingo_ativo" id="domingo_ativo">
                                            <span class="slider"></span>
                                        </label>
                                    </div>
                                    <div class="horario-inputs" id="horario-domingo" style="display: none;">
                                        <div class="row">
                                            <div class="col-6">
                                                <label class="form-label">Início</label>
                                                <input type="time" class="form-control campo-edicao" name="domingo_inicio" value="08:00">
                                            </div>
                                            <div class="col-6">
                                                <label class="form-label">Fim</label>
                                                <input type="time" class="form-control campo-edicao" name="domingo_fim" value="18:00">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="d-flex gap-2 mt-3">
                                    <button type="button" class="btn botao-medlive" onclick="salvarDisponibilidade()">
                                        <i class="bi bi-check me-1"></i>
                                        Salvar Alterações
                                    </button>
                                    <button type="button" class="btn botao-secundario" onclick="cancelarEdicaoDisponibilidade()">
                                        <i class="bi bi-x me-1"></i>
                                        Cancelar
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Painel Lateral -->
                <div class="col-lg-4">
                    <!-- Configurações de Conta -->
                    <div class="cartao-secao">
                        <h3 class="titulo-secao">
                            <i class="bi bi-gear icone-secao"></i>
                            Configurações
                        </h3>

                        <div class="d-grid gap-2">
                            <button class="btn botao-medlive" data-bs-toggle="modal" data-bs-target="#modalAlterarSenha">
                                <i class="bi bi-lock me-2"></i>
                                Alterar Senha
                            </button>
                            <button class="btn botao-secundario">
                                <i class="bi bi-bell me-2"></i>
                                Notificações
                            </button>
                            <button class="btn botao-secundario">
                                <i class="bi bi-shield-check me-2"></i>
                                Privacidade
                            </button>
                            <button class="btn botao-secundario">
                                <i class="bi bi-download me-2"></i>
                                Exportar Dados
                            </button>
                        </div>
                    </div>

                    <!-- Avaliações Recentes -->
                    <div class="cartao-secao">
                        <h3 class="titulo-secao">
                            <i class="bi bi-star icone-secao"></i>
                            Avaliações Recentes
                        </h3>

                        <div class="comentario-avaliacao">
                            <div class="autor-comentario">Maria Santos</div>
                            <div class="avaliacao-estrelas mb-2">
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                            </div>
                            <div class="texto-comentario">
                                Excelente profissional! Muito atencioso e explicou tudo detalhadamente.
                            </div>
                        </div>

                        <div class="comentario-avaliacao">
                            <div class="autor-comentario">Carlos Silva</div>
                            <div class="avaliacao-estrelas mb-2">
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star"></i>
                            </div>
                            <div class="texto-comentario">
                                Consulta muito esclarecedora. Recomendo!
                            </div>
                        </div>

                        <div class="text-center mt-3">
                            <button class="btn botao-secundario btn-sm">
                                Ver Todas as Avaliações
                            </button>
                        </div>
                    </div>

                    <!-- Ações Rápidas -->
                    <div class="cartao-secao">
                        <h3 class="titulo-secao">
                            <i class="bi bi-lightning icone-secao"></i>
                            Ações Rápidas
                        </h3>

                        <div class="d-grid gap-2">
                            <button class="btn botao-medlive">
                                <i class="bi bi-calendar-plus me-2"></i>
                                Nova Consulta
                            </button>
                            <button class="btn botao-secundario">
                                <i class="bi bi-file-medical me-2"></i>
                                Criar Prontuário
                            </button>
                            <button class="btn botao-secundario">
                                <i class="bi bi-prescription2 me-2"></i>
                                Emitir Receita
                            </button>
                            <button class="btn botao-secundario">
                                <i class="bi bi-graph-up me-2"></i>
                                Relatórios
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Modal Alterar Senha -->
    <div class="modal fade" id="modalAlterarSenha" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background: linear-gradient(135deg, #001942 0%, #003366 100%); color: white;">
                    <h5 class="modal-title">
                        <i class="bi bi-lock me-2"></i>
                        Alterar Senha
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="mb-3">
                            <label class="form-label">Senha Atual</label>
                            <input type="password" class="form-control campo-edicao" placeholder="Digite sua senha atual">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Nova Senha</label>
                            <input type="password" class="form-control campo-edicao" placeholder="Digite a nova senha">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Confirmar Nova Senha</label>
                            <input type="password" class="form-control campo-edicao" placeholder="Confirme a nova senha">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn botao-secundario" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn botao-medlive">Alterar Senha</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Editar Foto -->
    <div class="modal fade" id="modalEditarFoto" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background: linear-gradient(135deg, #001942 0%, #003366 100%); color: white;">
                    <h5 class="modal-title">
                        <i class="bi bi-camera me-2"></i>
                        Alterar Foto do Perfil
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body text-center">
                    <div class="foto-perfil mx-auto mb-3" style="width: 120px; height: 120px; font-size: 3rem;">
                        <img src="{{ usuario.foto if usuario.foto else '/static/img/user-default.png' }}" alt="Foto do perfil" class="foto-usuario">
                    </div>
                    
                    <form action="/perfil/alterar-foto" method="post" enctype="multipart/form-data" id="form-alterar-foto">
                        <div class="mb-3">
                            <label for="foto" class="form-label">Selecionar Nova Foto</label>
                            <input type="file" class="form-control campo-edicao" id="foto" name="foto" accept="image/*" required>
                        </div>
                        <p class="text-muted">Formatos aceitos: JPG, PNG, GIF, WEBP (máx. 5MB)</p>
                        
                        <div class="modal-footer">
                            <button type="button" class="btn botao-secundario" data-bs-dismiss="modal">Cancelar</button>
                            <button type="submit" class="btn botao-medlive">Salvar Foto</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

{% block extra_js %}
<script src="/static/js/perfil_medico.js"></script>


{% endblock %}

{% endblock %}

